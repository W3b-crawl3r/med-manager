  <div class="doctor-container">
  <div class="layout">
  <!-- SIDEBAR -->
  <aside class="sidebar">
    <!-- LOGO -->
    <div class="logo">
      <img [src]="logoSrc" class="logo-img" alt="MedMan Logo" />
    </div>

    <!-- PROFILE -->
    <div class="profile">
      <div class="avatar">D</div>
      <div>
        <p class="name">Dr. Johnson</p>
        <span class="role">DOCTOR</span>
      </div>
    </div>

    <!-- MENU -->
    <nav class="menu">
      <a routerLink="/doctor-page/dash" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">Dashboard</a>
      <a routerLink="/doctor-page/patients" routerLinkActive="active">Patients</a>
      <a routerLink="/doctor-page/appointments" routerLinkActive="active">Appointments</a>
      <a routerLink="/doctor-page/visits" routerLinkActive="active">Visits</a>
    </nav>

    <!-- LOGOUT -->
    <button class="logout" (click)="logout()"><span class="material-icons">logout</span> Logout</button>
  </aside>

  <!-- MAIN CONTENT -->
  <div class="content">
    <!-- TOPBAR -->
    <header class="topbar">
      <h2>Welcome back!</h2>

      <div class="topbar-controls">
        <div class="notifications" (click)="toggleNotifications()">
          <span class="material-icons">notifications</span>

          <span class="badge-count" *ngIf="unreadCount > 0">{{ unreadCount }}</span>

          <div class="notif-dropdown" *ngIf="notificationsOpen">
            <p class="notif-title">Notifications</p>
            <div class="notif-item" *ngFor="let n of notifications" [class.unread]="!n.read" (click)="markAsRead(n)">
              {{ n.message }}
            </div>
            <p class="notif-empty" *ngIf="notifications.length === 0">No notifications</p>
          </div>
        </div>

        <button class="theme-toggle" (click)="toggleTheme()" title="Toggle theme">
          <span class="material-icons">{{ getThemeIcon() }}</span>
        </button>

        <!-- single notifications control kept above -->
      </div>
    
      <!-- removed duplicate controls -->
    </header>

    <!-- PAGE CONTENT -->
    <main class="dashboard">
      <router-outlet></router-outlet>
    </main>
  </div>
  </div>
</div>

<!-- CHAT PANEL -->
<aside class="chat-panel" [class.open]="chatOpen">
  <div class="chat-header">
    <h4>Office Chat</h4>
    <button class="close" (click)="toggleChat()">Ã—</button>
  </div>
  <div class="chat-body">
    <div *ngFor="let m of chatMessages" class="chat-message" [class.me]="m.from==='doctor'">
      <div class="bubble">{{ m.text }} <div class="time">{{ m.time }}</div></div>
    </div>
  </div>
  <div class="chat-input">
    <input [(ngModel)]="chatDraft" (keydown.enter)="sendChat()" placeholder="Type a message..." />
    <button (click)="sendChat()">Send</button>
  </div>
</aside>

<!-- CHAT FAB (hidden while chat panel is open) -->
<button *ngIf="!chatOpen" class="chat-fab" (click)="toggleChat()" title="Open chat">
  <span class="material-icons">chat</span>
</button>