
<!-- ================= HEADER ================= -->
<header class="app-header" *ngIf="!isAuthRoute()">
  <div class="header-left">
    <img src="assets/medMan-white.png" alt="MedManager Logo" class="logo" />
    <div class="tagline">Your Health, Our Priority</div>
  </div>

  <div class="header-right">
    <!-- Language & Theme -->
    <button class="icon-btn">
      <span class="material-icons">language</span>
    </button>
    <button class="icon-btn" (click)="toggleTheme()" title="Toggle theme">
      <span class="material-icons">{{ getThemeIcon() }}</span>
    </button>

    <!-- Sign In / Register -->
    <button class="text-btn" routerLink="/doctor-login">Sign In</button>
    <div class="register-wrap">
      <button class="primary-btn" (click)="toggleRegisterMenu()">Register</button>
      <div *ngIf="registerMenuOpen()" class="register-menu">
        <button (click)="onRegisterRoleClick('doctor')">
          <span class="material-icons">medical_services</span> Doctor
        </button>
        <button (click)="onRegisterRoleClick('patient')">
          <span class="material-icons">person</span> Patient
        </button>
        <button (click)="onRegisterRoleClick('secretaire')">
          <span class="material-icons">assignment</span> Secretary
        </button>
      </div>
    </div>
  </div>
</header>

<!-- ================= HERO ================= -->
<main class="hero" *ngIf="!isAuthRoute()">
<div class="hero-bg-video dark-video">
  <video autoplay loop muted playsinline preload="auto">
    <source src="../assets/VideoHumain.mp4" type="video/mp4" />
  </video>
</div>

<div class="hero-bg-video light-video">
  <video autoplay loop muted playsinline preload="auto">
    <source src="../assets/dna.mp4" type="video/mp4" />
  </video>
</div>

  <!-- HERO CONTENT -->
  <h1 class="hero-title">
    <span class="gradient-text">Manage healthcare , </span>
    <span class="highlight-text">simply.</span>
  </h1>
  <p class="hero-subtitle">Find trusted doctors, book appointments, and manage your healthcare in one place.</p>

    <div class="hero-buttons">
    <button class="btn-outline" (click)="navigate('/book')">
      <span class="material-icons">event</span> Book an Appointment
    </button>
      <button class="btn-outline" (click)="navigate('/doctor-login')">
      <span class="material-icons">medical_services</span> Doctor Login
    </button>
  </div>
 
  <!-- Live Stats -->
  <div class="live-stats">
    <div class="stat-item">
      <div class="stat-number">{{ doctors.length }}</div>
      <div class="stat-label">Active Doctors</div>
    </div>
    <div class="stat-item">
      <div class="stat-number">1,250</div>
      <div class="stat-label">Patients Served</div>
    </div>
    <div class="stat-item">
      <div class="stat-number">99.2%</div>
      <div class="stat-label">Satisfaction Rate</div>
    </div>
  </div>
  <!-- ================= DARK MODE VIDEO ================= -->


  <!-- Live Stats -->
  <div class="live-stats">
    <div class="stat-item">
      <div class="stat-number">{{ doctors.length }}</div>
      <div class="stat-label">Active Doctors</div>
    </div>
    <div class="stat-item">
      <div class="stat-number">1,250</div>
      <div class="stat-label">Patients Served</div>
    </div>
    <div class="stat-item">
      <div class="stat-number">99.2%</div>
      <div class="stat-label">Satisfaction Rate</div>
    </div>
  </div>
</main>

<!-- ================= FIND DOCTOR ================= -->
<section class="doctors-section" id="doctors" *ngIf="!isAuthRoute()">
  <div class="section-header">
    <h2>Find Your Doctor</h2>
    <p class="subtitle">Search and book appointments with verified professionals</p>
  </div>

  <!-- Filters -->
  <div class="filters">
    <div class="filter-group">
      <span class="material-icons filter-icon">search</span>
      <input type="text" placeholder="Search by name or specialty..." [(ngModel)]="searchTerm" 
             class="filter-input" (input)="onFilterChange()" />
    </div>
    <div class="filter-group">
      <span class="material-icons filter-icon">medical_services</span>
      <select [(ngModel)]="selectedSpecialty" class="filter-select" (change)="onFilterChange()">
        <option value="all">All Specialties</option>
        <option *ngFor="let s of specialties" [value]="s">{{ s }}</option>
      </select>
    </div>
    <div class="filter-group">
      <span class="material-icons filter-icon">location_on</span>
      <select [(ngModel)]="selectedCity" class="filter-select" (change)="onFilterChange()">
        <option value="all">All Cities</option>
        <option *ngFor="let c of cities" [value]="c">{{ c }}</option>
      </select>
    </div>
    <button class="clear-btn" (click)="clearFilters()" *ngIf="hasActiveFilters()">
      <span class="material-icons">clear</span> Clear
    </button>
  </div>

  <!-- Doctors Grid -->
  <div class="doctors-grid">
    <div class="doctor-card" *ngFor="let doctor of filteredDoctors; let i = index">
      <div class="doctor-header">
        <div class="doctor-avatar">
          <img [src]="doctor.image" alt="doctor" />
          <div class="online-indicator" [class.online]="doctor.online"></div>
        </div>
        <div class="doctor-info-header">
          <h3>{{ doctor.name }}</h3>
          <span class="specialty-badge">{{ doctor.specialty }}</span>
          <div class="rating">
            <span class="material-icons star" *ngFor="let star of [1,2,3,4,5]">
              {{ star <= doctor.rating ? 'star' : 'star_border' }}
            </span>
            <span class="rating-text">{{ doctor.rating }}/5</span>
          </div>
        </div>
      </div>

      <div class="doctor-details">
        <p class="detail-item">
          <span class="material-icons icon">location_on</span>
          <span>{{ doctor.clinic }}, {{ doctor.location }}</span>
        </p>
        <p class="detail-item">
          <span class="material-icons icon">emoji_events</span>
          <span>{{ doctor.experience }} years experience</span>
        </p>
        <p class="detail-item">
          <span class="material-icons icon">schedule</span>
          <span>Next available: {{ doctor.nextAvailable }}</span>
        </p>
      </div>

      <div class="availability">
        <span class="availability-label">Available Days:</span>
        <div class="days-container">
          <span *ngFor="let day of doctor.availability" 
                class="day-pill" [class.active]="isToday(day)">
            {{ day }}
          </span>
        </div>
      </div>

      <button class="book-btn" (click)="bookAppointment(doctor.id)">
        <span class="material-icons">event_available</span>
        Book Appointment
      </button>
    </div>
  </div>

  <div class="no-result" *ngIf="filteredDoctors.length === 0">
    <span class="material-icons">search_off</span>
    <p>No doctors found matching your criteria.</p>
    <button class="retry-btn" (click)="clearFilters()">Clear Filters</button>
  </div>
</section>

<!-- ================= HOW IT WORKS ================= -->
<section class="how-it-works" id="how-it-works" *ngIf="!isAuthRoute()">
  <div class="section-header">
    <h2>How It Works</h2>
    <p>Simple steps to better healthcare</p>
  </div>
  <div class="steps-grid">
    <div class="step" *ngFor="let step of steps; let i = index">
      <div class="step-number">{{ i + 1 }}</div>
      <div class="step-content">
        <div class="step-icon">
          <span class="material-icons">{{ step.icon }}</span>
        </div>
        <h3>{{ step.title }}</h3>
        <p>{{ step.description }}</p>
      </div>
    </div>
  </div>
</section>

<!-- ================= USER ACCESS ================= -->
<section class="user-access" id="access" *ngIf="!isAuthRoute()">
  <div class="section-header">
    <h2>Access Your Space</h2>
    <p>Role-based portals for everyone</p>
  </div>
  <div class="access-grid">
    <div class="access-card" *ngFor="let portal of portals" (click)="navigate(portal.route)">
      <div class="access-icon">
        <span class="material-icons">{{ portal.icon }}</span>
      </div>
      <h3>{{ portal.title }}</h3>
      <p class="access-description">{{ portal.description }}</p>
      <ul class="access-features">
        <li *ngFor="let feature of portal.features" [class.restricted]="feature.restricted">
          <span class="material-icons">{{ feature.icon }}</span>
          {{ feature.text }}
        </li>
      </ul>
      <div class="access-cta">
        <span>Access Now</span>
        <span class="material-icons arrow">arrow_forward</span>
      </div>
    </div>
  </div>
</section>

<!-- ================= SECURITY ================= -->
<section class="security" *ngIf="!isAuthRoute()">
  <div class="section-header">
    <h2>Security & Trust</h2>
    <p>Your health data is protected with enterprise-grade security</p>
  </div>
  <div class="security-grid">
    <div class="security-item" *ngFor="let feature of securityFeatures">
      <div class="security-icon">
        <span class="material-icons">{{ feature.icon }}</span>
      </div>
      <h3>{{ feature.title }}</h3>
      <p>{{ feature.description }}</p>
    </div>
  </div>
</section>

<!-- ================= CTA ================= -->
<section class="cta" *ngIf="!isAuthRoute()">
  <div class="cta-content">
    <h2>Ready to Get Started?</h2>
    <p>Join thousands of patients and professionals</p>
    
      <div class="cta-buttons">
      <button class="btn-primary" (click)="navigate('/book')">
        <span class="material-icons">event</span> Book First Appointment
      </button>
        <button class="btn-outline" (click)="navigate('/doctor-login')">
        <span class="material-icons">medical_services</span> Access Your Portal
      </button>
    </div>
    
    <div class="trust-badges">
      <div class="badge">
        <span class="material-icons">verified</span>
        <span>HIPAA Compliant</span>
      </div>
      <div class="badge">
        <span class="material-icons">shield</span>
        <span>Bank-Level Security</span>
      </div>
      <div class="badge">
        <span class="material-icons">support_agent</span>
        <span>24/7 Support</span>
      </div>
    </div>
  </div>
</section>

<!-- ================= FOOTER ================= -->
<footer class="footer" *ngIf="!isAuthRoute()">
  <div class="footer-grid">
    <div class="footer-brand">
      <div class="footer-logo">
        <span class="material-icons">medical_services</span> Med Manager
      </div>
      <p>Professional medical management platform trusted by healthcare providers worldwide.</p>
      <div class="social-links">
        <a href="#" class="social-link"><span class="material-icons">facebook</span></a>
        <a href="#" class="social-link"><span class="material-icons">twitter</span></a>
        <a href="#" class="social-link"><span class="material-icons">linkedin</span></a>
      </div>
    </div>
    
    <div class="footer-links-group">
      <h4>For Patients</h4>
      <div class="footer-links">
        <a href="#doctors" (click)="smoothScroll('doctors')">
          <span class="material-icons">search</span> Find Doctors
        </a>
        <a (click)="navigate('/patient-login')">
          <span class="material-icons">login</span> Patient Login
        </a>
        <a href="#how-it-works" (click)="smoothScroll('how-it-works')">
          <span class="material-icons">info</span> How It Works
        </a>
      </div>
    </div>
    
    <div class="footer-links-group">
      <h4>For Professionals</h4>
      <div class="footer-links">
        <a (click)="navigate('/doctor-login')">
          <span class="material-icons">medical_services</span> Doctor Portal
        </a>
        <a (click)="navigate('/secretary-login')">
          <span class="material-icons">assignment</span> Secretary Portal
        </a>
        <a (click)="navigate('/login/admin')">
          <span class="material-icons">admin_panel_settings</span> Admin Access
        </a>
      </div>
    </div>
    
    <div class="footer-links-group">
      <h4>About & Support</h4>
      <div class="footer-links">
        <a href="#access" (click)="smoothScroll('access')">
          <span class="material-icons">security</span> Security
        </a>
        <a>
          <span class="material-icons">policy</span> Privacy Policy
        </a>
        <a>
          <span class="material-icons">description</span> Terms of Service
        </a>
        <a>
          <span class="material-icons">support_agent</span> Contact Support
        </a>
      </div>
    </div>
  </div>
  
  <div class="footer-bottom">
    <div class="footer-copyright">
      © {{ getCurrentYear() }} Med Manager. All rights reserved.
    </div>
    <div class="footer-extra">
      <span class="live-indicator">
        <span class="pulse-dot"></span>
        System Status: <strong>Operational</strong>
      </span>
    </div>
  </div>
</footer>

<!-- Live Chat Widget -->
<div class="live-chat" *ngIf="!isAuthRoute()">
  <button class="chat-toggle" (click)="toggleChat()">
    <span class="material-icons">chat</span>
    <span class="chat-notification" *ngIf="hasUnreadMessages()">●</span>
  </button>
</div>

<!-- ================= ROUTER ================= -->
<router-outlet></router-outlet>